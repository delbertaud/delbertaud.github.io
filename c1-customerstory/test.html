<html>
    <!-- 
        https://delbertaud.github.io/c1-customerstory 
        https://delbertaud.github.io/c1-customerstory/test.html
        https://c1apitest.delbertaud.com/
    -->
    <head>
        <style>
            table tr th {text-align: center;}
            table tr td {vertical-align: top;}
        </style>
    </head>
    <body>
        <center>
            <table width='670px'>
                <tr><th colspan="3">
                    Customer Name or Code:<br />
                    <hr />
                </td></tr>
                <tr>
                    <th>Filter</th>
                    <th>Customer List</th>
                    <th>Action Button</th>
                </tr>
                <tr>
                    <td width='300px'>
                        <input id=searchFor type=text class=searchFor onkeyup="return findCompanies();" size=40>
                    </td>
                    <td width='300px'>
                        <select id="companies" size="20" width='290px' onchange="return copyFromListToTextbox()"></select>
                    </td>
                    <td width='50px'>
                        <input id='submit' type=submit disabled onclick='alert("button clicked"); false;''>
                    </td>
                </tr>
            </table>
        </center>
    </body>
    <script>
        function findCompanies() {
            document.getElementById('submit').disabled = true;
            searchForValue = document.getElementById('searchFor').value.toLowerCase();
            url = "https://c1apitest.delbertaud.com/" + searchForValue;
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function() { 
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                    findCompaniesCallBack(xmlHttp.responseText);
                }
            }
            xmlHttp.open("GET", url, true); 
            xmlHttp.send(null);
            return false;
        }
        function findCompaniesCallBack(response) {
            contents = ""
            data = JSON.parse(response);
            data.forEach(function(element) {
                contents += "<option value='element'>" + element + "</option>"
            });
            document.getElementById("companies").innerHTML = contents;
        }
        function copyFromListToTextbox() {
            e = document.getElementById("companies");
            if (e.selectedIndex != -1) {
                fieldValue = e.selectedOptions[0].innerText;
                fieldArray = fieldValue.split(":")
                document.getElementById("searchFor").value = fieldArray[0];
                document.getElementById('submit').disabled = false;
            } else {
                document.getElementById('submit').disabled = true;
            }
        }
    </script>
</html>
	